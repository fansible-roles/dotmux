---
# remove the template backup copies generated by ansible
- name: "Finding .tmux.conf backup copies"
  ansible.builtin.find:
    paths: "{{ ansible_facts['env']['HOME'] }}"
    patterns: '*.tmux.conf.*~'
    depth: 1
    hidden: true
  register: __tmux_conf_bkp

- name: "Cleaning .tmux.conf.*~ backup copies"
  ansible.builtin.file:
    path: "{{ item.path }}"
    state: absent
  loop: "{{ __tmux_conf_bkp.files }}"
  when: __tmux_conf_bkp.matched != 0

- name: "Finding .tmux/*.conf.*~ backup copies"
  ansible.builtin.find:
    paths: "{{ tmux_conf_dir }}"
    patterns: '*.conf.*~'
    depth: 1
  register: __tmux_bkp

- name: "Cleaning .tmux/*.conf.*~ backup copies"
  ansible.builtin.file:
    path: "{{ item.path }}"
    state: absent
  loop: "{{ __tmux_bkp.files }}"
  when: __tmux_bkp.matched != 0
